/*Молодяков Константин ВИтальевич(702)
Лабораторная работа №1.
Вариант 5.
Задача 3.

3.	Функция, выдающая возраст по двум датам: дате рождения и дате, на которую интересует возраст. Если вторая дата не указана, то возраст на текущую дату. Вызывать функцию для двух полей: дата рождения автора и дата защиты диссертации.*/


-- функция выдающая возраст по двум датам 
CREATE OR REPLACE FUNCTION age(birth_date in date, currrent_date in date := sysdate) --прототип
	return int -- возвращемое значение
is -- просто is
begin -- начало тела функции
	--тело функции 
	--собственно просто возвращаем значение после простых преобразований
	return	floor( (current_date - birth_date)/365); -- вычитаем даты, делим на количество дней в году и берем целю часть
end; -- конец


--пример
select "ФИО",age("Дата_рождения","Дата_защиты") as "Возраст на момент защиты"
	from "Научные_работы"; -- селект * фром табле xD